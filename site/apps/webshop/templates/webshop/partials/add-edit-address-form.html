<div class="shipping__map full-screen">
  <div class="map fill-width fill-height">
    <div id="map" data-full-screen="true" class="fill-width fill-height"></div>
    <div id="map_controls" class="shipping-map--submit d-flex flex-column align-center justify-center pd-2 pd-md-4 d-none">
      <div id="map_address" class="shipping-map--label d-flex flex-column justify-center align-center px-2 py-1 mb-1 mb-sm-2"></div>
      <button id="submit_address" type="button" data-id="shipping-map-submit-btn" class="button fill-width button--main justify-center shrink" disabled="disabled">
        <span class="button__wrapper">
          <span class="button__value">Доставить на этот адрес</span>
          <span class="button__value button__value--saved">Адрес сохранен</span>
        </span>
      </button>
    </div>
  </div>
</div>
<form id="edit-address" method="post">
  {% csrf_token %}
  {% include 'webshop/partials/render_field.html' with field=form.coords_long %}
  {% include 'webshop/partials/render_field.html' with field=form.coords_lat %}
  {% if form.is_bound and not form.is_valid %}
    <div class="alert alert-danger mb-2">
      <strong>Что-то пошло не так</strong>
    </div>
  {% endif %}
  {% if form.non_field_errors %}
    {% for error in form.non_field_errors %}
      <div class="alert alert-danger mb-2">
        <i class="fas fa-exclamation"></i> {{ error }}
      </div>
    {% endfor %}
  {% endif %}
  <div class="shipping" id="address_fields">
    <div class="d-none d-sm-flex mb-2">
      <h1>Адрес доставки</h1>
    </div>
    <div id="line1_container" class="shipping__address-wrapper input alternative">
      <div class="d-flex shipping--input">
        {% include 'webshop/partials/render_line1.html' with field=form.line1 data_id='address-input' %}
      </div>
      <div id="suggest_list" class="search__suggest d-none"></div> {% comment %}2gis{% endcomment %}
    </div>
    <div class="mt-0 row">
      <div class="col col-4 col-sm-4">
        <div data-id="input-field" class="input d-flex align-center input__padding{% if form.initial.line2 %} input__label-active{% endif %}">
          <div class="input__wrapper">
            <div class="input__label">Квартира</div>
            <div class="input__control d-flex align-center">
              {% include 'webshop/partials/render_field.html' with field=form.line2 data_id='shipping-input-flat' %}
            </div>
          </div>
        </div>
      </div>
      <div class="col col-4 col-sm-4">
        <div data-id="input-field" class="input d-flex align-center input__padding{% if form.initial.line3 %} input__label-active{% endif %}">
          <div class="input__wrapper">
            <div class="input__label">Подъезд</div>
            <div class="input__control d-flex align-center">
              {% include 'webshop/partials/render_field.html' with field=form.line3 data_id='shipping-input-door' %}
            </div>
          </div>
        </div>
      </div>
      <div class="col col-4 col-sm-4">
        <div data-id="input-field" class="input d-flex align-center input__padding{% if form.initial.line4 %} input__label-active{% endif %}">
          <div class="input__wrapper">
            <div class="input__label">Этаж</div>
            <div class="input__control d-flex align-center">
              {% include 'webshop/partials/render_field.html' with field=form.line4 data_id='shipping-input-floor' %}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div data-id="input-field" class="input text-area d-flex align-center mt-2 input__padding{% if form.initial.notes %} input__label-active{% endif %}">
      <div class="input__wrapper">
        <div class="input__label">Комментарий курьеру</div>
        <div class="input__control d-flex align-center">
          {% include 'webshop/partials/render_field.html' with field=form.notes data_id='shipping-input-note' %}
        </div>
      </div>
    </div>
    <div class="error-list d-flex flex-column mt-2 error-list--frame d-none" data-id="checkout-error-list">
      <div class="d-flex flex-column fill-width">
        <span data-error="address" class="error-list__error d-flex fill-width d-none">Укажите адрес доставки</span>
        <span data-error="flat" class="error-list__error d-flex fill-width d-none">Укажите номер квартиры</span>
        <span data-error="enter" class="error-list__error d-flex fill-width d-none">Укажите подъезд</span>
        <span data-error="floor" class="error-list__error d-flex fill-width d-none">Укажите этаж</span>
      </div>
    </div>
    <div class="d-flex align-center justify-space-between mt-2 mt-sm-3">
      <div class="confirm__button">
        <button id="save_address" type="submit" disabled class="button fill-width button--main justify-center shrink">
          <span class="button__wrapper">
            <span class="button__value">Сохранить адрес</span>
            <span class="button__value button__value--saved">Адрес сохранен</span>
          </span>
        </button>
      </div>
      <div class="confirm__button">
        <button onclick="window.history.go(-1);return false" type="button" class="button fill-width button--white justify-center shrink"><span class="button__wrapper"><span class="button__value">Отмена</span></span></button>
      </div>
    </div>
  </div>
</form>
