{% extends 'oscar/dashboard/layout.html' %}

{% load currency_filters %}
{% load django_tables2 %}
{% load widget_tweaks %}
{% load dashboard_tags %}
{% load svg_tags %}
{% load compress %}
{% load static %}

{% block body_class %}{{ block.super }} orders{% endblock %}

{% block title %}
    Статистика заказов | {{ block.super }}
{% endblock %}

{% block breadcrumbs %}
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'dashboard:index' %}">Главная</a></li>
            <li class="breadcrumb-item"><a href="{% url 'dashboard:order-list' %}">Заказы</a></li>
            <li class="breadcrumb-item active" aria-current="page">Статистика</li>
        </ol>
    </nav>
{% endblock %}

{% block navtext %}
    <h1>{{ title }}</h1>
{% endblock %}

{% block dashboard_content %}
    <div class="table-wrapper mb-4">
        <div class="table-header d-flex justify-space-between" data-target="#search-body" 
        data-toggle="collapse" aria-controls="search-body" aria-expanded="false">
            <h3><i class="fas fa-filter"></i> Фильтр</h3>
            <i class="fa-solid fa-chevron-up" style="color: var(--primary);"></i>
            <i class="fa-solid fa-chevron-down" style="color: var(--primary);"></i>
        </div>
        <div class="card card-body bg-light {% if form.is_valid %}collapse{% endif %}" id="search-body">
            <form method="get" action="{% url 'dashboard:order-stats' %}" class="form-inline fill-width d-flex justify-content-between align-items-end">
                <div class="btn-form">
                    {% for field in form %}
                        {% if "date_range" in field.id_for_label %}
                            {% if field.is_hidden %}
                                {% render_field field class+='form-control' %}
                            {% else %}
                                <div class="form-group form-flex-inline date-form">
                                    {{ field.label_tag }}
                                    {% render_field field class+='form-control' %}
                                    {% for error in field.errors %}
                                        <ul class="error-block">
                                            <li>{{ error }}</li>
                                        </ul>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="btn-form d-flex">
                    <button class="btn btn-primary flex-fill" type="submit">
                        <i class="fas fa-search"></i>
                        <span class="ml-2">
                            Поиск
                        </span>
                    </button>
                    <a data-toggle="modal" class="btn btn-third ml-2" data-target="#SearchModal" href="#">
                        <i class="fa-solid fa-bars"></i>
                    </a>
                    {% if request.GET %}
                        <a href="{% url 'dashboard:order-stats' %}" class="btn btn-danger ml-2">
                            <i class="fa-solid fa-trash"></i>
                        </a>
                    {% endif %}
                </div>   
            </form>
            {% include "oscar/dashboard/partials/advanced_search_modal.html" with form=form style='horizontal' %}
            {% if search_filters %}
                <div class="search-filter-list mt-4">
                    <label class="mr-2">Фильтры:</label>
                    {% for filter, param in search_filters %}
                        <span class="badge badge-filter mb-2 mr-1">{{ filter }}
                            <a class="delete-filter text-danger ml-1" href="{% delete_filter request param %}">
                                <i class="fa-solid fa-xmark"></i>
                            </a>    
                        </span>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
    <div class="page-header d-flex justify-content-between mb-2">
        <h1>Заказы</h1>
    </div>
    <ul class="nav nav-tabs mb-3 mb-lg-4 p-0" role="tablist">
        {% block nav_tabs %}
            <div class="half-wrapper">
                <div class="nav tabs-button d-flex fill">
                    <div class="tabs-button__active-block" style="width: calc(100% / 4); left: 0px;"><div class="fill-width fill-height"></div></div>
                    <button role="button" class="tabs-button__button {% if active_tab == 'day' %}active{% endif %}" href="#statistic_day" data-toggle="tab">
                        День
                    </button>
                    <button role="button" class="tabs-button__button {% if active_tab == 'week' %}active{% endif %}" href="#statistic_week" data-toggle="tab">
                        Неделя
                    </button>
                    <button role="button" class="tabs-button__button {% if active_tab == 'month' %}active{% endif %}" href="#statistic_month" data-toggle="tab">
                        Месяц
                    </button>
                    <button role="button" class="tabs-button__button {% if active_tab == 'year' %}active{% endif %}" href="#statistic_year" data-toggle="tab">
                        Год
                    </button>
                </div>
            </div>
        {% endblock nav_tabs %}
    </ul>
    <div class="tab-content">
        <div class="tab-pane fade {% if active_tab == 'day' %}show active{% endif %}" id="statistic_day" data-id="report-tab" role="tabpanel">   
            <div class="content-block rounded">
                {% if report_exist_days %}
                    <div class="bar-caption d-flex justify-content-center align-items-center fill-width my-3 carousel__navs">
                        <button class="mr-4" data-id="prev-page">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="1 0 24 24" fill="none" stroke="#007bff" height="20px">
                                <path d="M15 7L10 12L15 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </button>
                        <h2 class="my-0">Заказы | <span data-id="page-info"class="text-primary">{{ start_date_days|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></h2>
                        <button class="right ml-4" data-id="next-page">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="1 0 24 24" fill="none" stroke="#007bff" height="20px">
                                <path d="M15 7L10 12L15 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="chart-container my-2">
                        <canvas class="canvas-graph" data-id="graph-chart"></canvas>
                    </div>
                    <div class="d-flex flex-column flex-sm-row justify-content-center mt-4">
                        <div class="legend-chart legend-chart--graph" data-id="legend-graph-chart"></div>
                        <div class="range-container" data-id="range-container">
                            <label class="mb-2">Элементов на графике: <span data-id="range-value">10</span></label>
                            <div class="range-values">
                                <span data-id="range-min">5</span>
                                <input type="range" data-id="graph-range" min="5" max="30" value="10">
                                <span data-id="range-max">30</span>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <div class="d-flex justify-content-center fill-width my-2"><h2>Заказы |<span class="text-primary"> {{ start_date_days|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></h2></div>
                    <div class="empty-report" style="min-height: 350px;">
                        <span>
                            Нет созданных заказов
                        </span>
                    </div>
                {% endif %}
            </div>
            <div class="row">
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Все заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_discount_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_discount_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_days|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_days|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_costs_days|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Эвотор заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_offline_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_offline_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_offline_discount_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_offline_discount_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_offline_days|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_offline_days|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_offline_costs_days|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Онлайн заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_online_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_online_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_online_discount_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_online_discount_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_online_days|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_online_days|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_online_costs_days|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-users"></i> Клиенты
                            <a href="{% url 'dashboard:customer-list' %}" class="btn btn-secondary float-right caption-fill-width">
                                <i class="fas fa-gears"></i> 
                                <span class="caption-button"> Управление</span>
                            </a>
                        </caption>
                        <tr>
                            <th class="col-md-10">Всего пользователей</th>
                            <td class="col-md-2" >{{ users_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего клиентов</th>
                            <td class="col-md-2" >{{ customers_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Новых пользователей</th>
                            <td class="col-md-2" >{{ users_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Новых клиентов</th>
                            <td class="col-md-2" >{{ customers_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего создано корзин</th>
                            <td class="col-md-2" >{{ baskets_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Клиенты с 2 и более заказами</th>
                            <td class="col-md-2" >{{ customers_2orders_days }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Клиенты с 5 и более заказами</th>
                            <td class="col-md-2" >{{ customers_5orders_days }}</td>
                        </tr>
                    </table>
                </div>
                {% if order_status_breakdown_days %}
                    <div class="col-md-4">
                        <table class="table table-striped table-bordered table-hover table-text-right">
                            <caption><i class="fas fa-shopping-cart"></i> Статусы заказов</caption>
                            {% for dict in order_status_breakdown_days %}
                                <tr>
                                    <th><a href="{% url 'dashboard:order-list' %}{% querystring 'status'=dict.status %}">{{ dict.status }}</a></th>
                                    <td>{{ dict.freq }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
                {% endif %}
            </div>
            <div class="row">
                {% if report_exist_days %}
                    <div class="col-md-4">
                        <table class="table table-striped table-bordered table-hover table-text-right">
                            <caption>
                                <i class="fas fa-shopping-cart"></i> Топ продаж</span>
                                <a href="{% url 'dashboard:catalogue-product-list' %}" class="btn btn-secondary float-right caption-fill-width">
                                    <i class="fas fa-gears"></i> 
                                    <span class="caption-button"> Управление</span>
                                </a>
                            </caption>
                            <thead>
                                <tr>
                                    <th class="col-md-9">Продукт</th>
                                    <th class="col-md-3 text-right">Кол-во</th>
                                    <th class="col-md-3 text-right">Сумма</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for prd in top_products_days %}
                                    <tr>
                                        <th class="col-md-9">
                                            <a href="{% url 'dashboard:catalogue-product' pk=prd.product %}">
                                                {{ prd.name }}
                                            </a>
                                        </th>
                                        <td class="col-md-3" >{{ prd.total_quantity }}</td>
                                        <td class="col-md-3" >{{ prd.total_sum|currency }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="col-md-8">
                        <div class="content-block rounded tab-content d-flex flex-column align-items-center">
                            <div class="half-wrapper">
                                <div class="nav tabs-button d-flex fill" role="tablist">
                                    <div class="tabs-button__active-block" style="width: calc(100% / 2); left: 0px;"><div class="fill-width fill-height"></div></div>
                                    <button role="button" class="tabs-button__button active" href="#top_product_price_day" data-toggle="tab">
                                        По стоимости
                                    </button>
                                    <button role="button" class="tabs-button__button" href="#top_product_count_day" data-toggle="tab">
                                        По количеству
                                    </button>
                                </div>
                            </div>
        
                            <div class="tab-pane fade show active chart-container" id="top_product_price_day" role="tabpanel">
                                <div class="d-flex justify-content-center mt-4">
                                    <div class="legend-chart d-flex flex-column" data-id="legend-price-chart"></div>
                                    <canvas class="canvas-graph canvas-graph--doughnut" data-id="price-chart"></canvas>
                                </div>
                            </div>
                            <div class="tab-pane fade chart-container" id="top_product_count_day" role="tabpanel">
                                <div class="d-flex justify-content-center mt-4">
                                    <div class="legend-chart d-flex flex-column" data-id="legend-count-chart"></div>
                                    <canvas class="canvas-graph canvas-graph--doughnut" data-id="count-chart"></canvas>
                                </div>
                            </div>

                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="tab-pane fade {% if active_tab == 'week' %}show active{% endif %}" id="statistic_week" data-id="report-tab" role="tabpanel">
            <div class="content-block rounded">
                {% if report_exist_weeks %}
                    <div class="bar-caption d-flex justify-content-center align-items-center fill-width my-3 carousel__navs">
                        <button class="mr-4" data-id="prev-page">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="1 0 24 24" fill="none" stroke="#007bff" height="20px">
                                <path d="M15 7L10 12L15 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </button>
                        <h2 class="my-0">Заказы | <span data-id="page-info"class="text-primary"> {{ start_date_weeks|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></h2>
                        <button class="right ml-4" data-id="next-page">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="1 0 24 24" fill="none" stroke="#007bff" height="20px">
                                <path d="M15 7L10 12L15 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="chart-container my-2">
                        <canvas class="canvas-graph" data-id="graph-chart"></canvas>
                    </div>
                    <div class="d-flex flex-column flex-sm-row justify-content-center mt-4">
                        <div class="legend-chart legend-chart--graph" data-id="legend-graph-chart"></div>
                        <div class="range-container" data-id="range-container">
                            <label class="mb-2">Элементов на графике: <span data-id="range-value">10</span></label>
                            <div class="range-values">
                                <span data-id="range-min">5</span>
                                <input type="range" data-id="graph-range" min="5" max="30" value="10">
                                <span data-id="range-max">30</span>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <div class="d-flex justify-content-center fill-width my-2"><h2>Заказы |<span class="text-primary"> {{ start_date_weeks|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></h2></div>
                    <div class="empty-report" style="min-height: 350px;">
                        <span>
                            Нет созданных заказов
                        </span>
                    </div>
                {% endif %}
            </div>
            <div class="row">
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Все заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_discount_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_discount_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_weeks|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_weeks|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_costs_weeks|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Эвотор заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_offline_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_offline_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_offline_discount_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_offline_discount_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_offline_weeks|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_offline_weeks|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_offline_costs_weeks|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Онлайн заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_online_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_online_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_online_discount_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_online_discount_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_online_weeks|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_online_weeks|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_online_costs_weeks|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-users"></i> Клиенты
                            <a href="{% url 'dashboard:customer-list' %}" class="btn btn-secondary float-right caption-fill-width">
                                <i class="fas fa-gears"></i> 
                                <span class="caption-button"> Управление</span>
                            </a>
                        </caption>
                        <tr>
                            <th class="col-md-10">Всего пользователей</th>
                            <td class="col-md-2" >{{ users_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего клиентов</th>
                            <td class="col-md-2" >{{ customers_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Новых пользователей</th>
                            <td class="col-md-2" >{{ users_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Новых клиентов</th>
                            <td class="col-md-2" >{{ customers_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего создано корзин</th>
                            <td class="col-md-2" >{{ baskets_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Клиенты с 2 и более заказами</th>
                            <td class="col-md-2" >{{ customers_2orders_weeks }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Клиенты с 5 и более заказами</th>
                            <td class="col-md-2" >{{ customers_5orders_weeks }}</td>
                        </tr>
                    </table>
                </div>
                {% if order_status_breakdown_weeks %}
                    <div class="col-md-4">
                        <table class="table table-striped table-bordered table-hover table-text-right">
                            <caption><i class="fas fa-shopping-cart"></i> Статусы заказов</caption>
                            {% for dict in order_status_breakdown_weeks %}
                                <tr>
                                    <th><a href="{% url 'dashboard:order-list' %}{% querystring 'status'=dict.status %}">{{ dict.status }}</a></th>
                                    <td>{{ dict.freq }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
                {% endif %}
            </div>
            <div class="row">
                {% if report_exist_weeks %}
                    <div class="col-md-4">
                        <table class="table table-striped table-bordered table-hover table-text-right">
                            <caption>
                                <i class="fas fa-shopping-cart"></i> Топ продаж</span>
                                <a href="{% url 'dashboard:catalogue-product-list' %}" class="btn btn-secondary float-right caption-fill-width">
                                    <i class="fas fa-gears"></i> 
                                    <span class="caption-button"> Управление</span>
                                </a>
                            </caption>
                            <thead>
                                <tr>
                                    <th class="col-md-9">Продукт</th>
                                    <th class="col-md-3 text-right">Кол-во</th>
                                    <th class="col-md-3 text-right">Сумма</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for prd in top_products_weeks %}
                                    <tr>
                                        <th class="col-md-9">
                                            <a href="{% url 'dashboard:catalogue-product' pk=prd.product %}">
                                                {{ prd.name }}
                                            </a>
                                        </th>
                                        <td class="col-md-3" >{{ prd.total_quantity }}</td>
                                        <td class="col-md-3" >{{ prd.total_sum|currency }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="col-md-8">
                        <div class="content-block rounded tab-content d-flex flex-column align-items-center">
                            <div class="half-wrapper">
                                <div class="nav tabs-button d-flex fill" role="tablist">
                                    <div class="tabs-button__active-block" style="width: calc(100% / 2); left: 0px;"><div class="fill-width fill-height"></div></div>
                                    <button role="button" class="tabs-button__button active" href="#top_product_price_week" data-toggle="tab">
                                        По стоимости
                                    </button>
                                    <button role="button" class="tabs-button__button" href="#top_product_count_top_product_price_week" data-toggle="tab">
                                        По количеству
                                    </button>
                                </div>
                            </div>
                            <div class="tab-pane fade show active chart-container" id="top_product_price_week" role="tabpanel">
                                <div class="d-flex justify-content-center mt-4">
                                    <div class="legend-chart d-flex flex-column" data-id="legend-price-chart"></div>
                                    <canvas class="canvas-graph canvas-graph--doughnut" data-id="price-chart"></canvas>
                                </div>
                            </div>
                            <div class="tab-pane fade chart-container" id="top_product_count_top_product_price_week" role="tabpanel">
                                <div class="d-flex justify-content-center mt-4">
                                    <div class="legend-chart d-flex flex-column" data-id="legend-count-chart"></div>
                                    <canvas class="canvas-graph canvas-graph--doughnut" data-id="count-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="tab-pane fade {% if active_tab == 'month' %}show active{% endif %}" id="statistic_month" data-id="report-tab" role="tabpanel">
            <div class="content-block rounded">
                {% if report_exist_months %}
                    <div class="bar-caption d-flex justify-content-center align-items-center fill-width my-3 carousel__navs">
                        <button class="mr-4" data-id="prev-page">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="1 0 24 24" fill="none" stroke="#007bff" height="20px">
                                <path d="M15 7L10 12L15 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </button>
                        <h2 class="my-0">Заказы | <span data-id="page-info"class="text-primary"> {{ start_date_months|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></h2>
                        <button class="right ml-4" data-id="next-page">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="1 0 24 24" fill="none" stroke="#007bff" height="20px">
                                <path d="M15 7L10 12L15 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="chart-container my-2">
                        <canvas class="canvas-graph" data-id="graph-chart"></canvas>
                    </div>
                    
                    <div class="d-flex flex-column flex-sm-row justify-content-center mt-4">
                        <div class="legend-chart legend-chart--graph" data-id="legend-graph-chart"></div>
                        <div class="range-container" data-id="range-container">
                            <label class="mb-2">Элементов на графике: <span data-id="range-value">10</span></label>
                            <div class="range-values">
                                <span data-id="range-min">5</span>
                                <input type="range" data-id="graph-range" min="5" max="30" value="10">
                                <span data-id="range-max">30</span>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <div class="d-flex justify-content-center fill-width my-2"><h2>Заказы |<span class="text-primary"> {{ start_date_months|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></h2></div>
                    <div class="empty-report" style="min-height: 350px;">
                        <span>
                            Нет созданных заказов
                        </span>
                    </div>
                {% endif %}
            </div>
            <div class="row">
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Все заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_discount_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_discount_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_months|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_months|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_costs_months|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Эвотор заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_offline_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_offline_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_offline_discount_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_offline_discount_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_offline_months|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_offline_months|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_offline_costs_months|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Онлайн заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_online_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_online_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_online_discount_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_online_discount_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_online_months|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_online_months|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_online_costs_months|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-users"></i> Клиенты
                            <a href="{% url 'dashboard:customer-list' %}" class="btn btn-secondary float-right caption-fill-width">
                                <i class="fas fa-gears"></i> 
                                <span class="caption-button"> Управление</span>
                            </a>
                        </caption>
                        <tr>
                            <th class="col-md-10">Всего пользователей</th>
                            <td class="col-md-2" >{{ users_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего клиентов</th>
                            <td class="col-md-2" >{{ customers_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Новых пользователей</th>
                            <td class="col-md-2" >{{ users_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Новых клиентов</th>
                            <td class="col-md-2" >{{ customers_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего создано корзин</th>
                            <td class="col-md-2" >{{ baskets_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Клиенты с 2 и более заказами</th>
                            <td class="col-md-2" >{{ customers_2orders_months }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Клиенты с 5 и более заказами</th>
                            <td class="col-md-2" >{{ customers_5orders_months }}</td>
                        </tr>
                    </table>
                </div>
                {% if order_status_breakdown_months %}
                    <div class="col-md-4">
                        <table class="table table-striped table-bordered table-hover table-text-right">
                            <caption><i class="fas fa-shopping-cart"></i> Статусы заказов</caption>
                            {% for dict in order_status_breakdown_months %}
                                <tr>
                                    <th><a href="{% url 'dashboard:order-list' %}{% querystring 'status'=dict.status %}">{{ dict.status }}</a></th>
                                    <td>{{ dict.freq }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
                {% endif %}
            </div>
            <div class="row">
                {% if report_exist_months %}
                    <div class="col-md-4">
                        <table class="table table-striped table-bordered table-hover table-text-right">
                            <caption>
                                <i class="fas fa-shopping-cart"></i> Топ продаж</span>
                                <a href="{% url 'dashboard:catalogue-product-list' %}" class="btn btn-secondary float-right caption-fill-width">
                                    <i class="fas fa-gears"></i> 
                                    <span class="caption-button"> Управление</span>
                                </a>
                            </caption>
                            <thead>
                                <tr>
                                    <th class="col-md-9">Продукт</th>
                                    <th class="col-md-3 text-right">Кол-во</th>
                                    <th class="col-md-3 text-right">Сумма</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for prd in top_products_months %}
                                    <tr>
                                        <th class="col-md-9">
                                            <a href="{% url 'dashboard:catalogue-product' pk=prd.product %}">
                                                {{ prd.name }}
                                            </a>
                                        </th>
                                        <td class="col-md-3" >{{ prd.total_quantity }}</td>
                                        <td class="col-md-3" >{{ prd.total_sum|currency }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="col-md-8">
                        <div class="content-block rounded tab-content d-flex flex-column align-items-center">
                            <div class="half-wrapper">
                                <div class="nav tabs-button d-flex fill" role="tablist">
                                    <div class="tabs-button__active-block" style="width: calc(100% / 2); left: 0px;"><div class="fill-width fill-height"></div></div>
                                    <button role="button" class="tabs-button__button active" href="#top_product_price_month" data-toggle="tab">
                                        По стоимости
                                    </button>
                                    <button role="button" class="tabs-button__button" href="#top_product_count_month" data-toggle="tab">
                                        По количеству
                                    </button>
                                </div>
                            </div>
                            <div class="tab-pane fade show active chart-container" id="top_product_price_month" role="tabpanel">
                                <div class="d-flex justify-content-center mt-4">
                                    <div class="legend-chart d-flex flex-column" data-id="legend-price-chart"></div>
                                    <canvas class="canvas-graph canvas-graph--doughnut" data-id="price-chart"></canvas>
                                </div>
                            </div>
                            <div class="tab-pane fade chart-container" id="top_product_count_month" role="tabpanel">
                                <div class="d-flex justify-content-center mt-4">
                                    <div class="legend-chart d-flex flex-column" data-id="legend-count-chart"></div>
                                    <canvas class="canvas-graph canvas-graph--doughnut" data-id="count-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="tab-pane fade {% if active_tab == 'year' %}show active{% endif %}" id="statistic_year" data-id="report-tab" role="tabpanel">
            <div class="content-block rounded">
                {% if report_exist_years %}
                    <div class="bar-caption d-flex justify-content-center align-items-center fill-width my-3 carousel__navs">
                        <button class="mr-4" data-id="prev-page">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="1 0 24 24" fill="none" stroke="#007bff" height="20px">
                                <path d="M15 7L10 12L15 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </button>
                        <h2 class="my-0">Заказы | <span data-id="page-info"class="text-primary"> {{ start_date_years|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></h2>
                        <button class="right ml-4" data-id="next-page">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="1 0 24 24" fill="none" stroke="#007bff" height="20px">
                                <path d="M15 7L10 12L15 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="chart-container my-2">
                        <canvas class="canvas-graph" data-id="graph-chart"></canvas>
                    </div>
                    <div class="d-flex flex-column flex-sm-row justify-content-center mt-4">
                        <div class="legend-chart legend-chart--graph" data-id="legend-graph-chart"></div>
                        <div class="range-container" data-id="range-container">
                            <label class="mb-2">Элементов на графике: <span data-id="range-value">10</span></label>
                            <div class="range-values">
                                <span data-id="range-min">5</span>
                                <input type="range" data-id="graph-range" min="5" max="30" value="10">
                                <span data-id="range-max">30</span>
                            </div>
                        </div>
                    </div>
                {% else %} 
                    <div class="d-flex justify-content-center fill-width my-2"><h2>Заказы |<span class="text-primary"> {{ start_date_years|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></h2></div>
                    <div class="empty-report" style="min-height: 350px;">
                        <span>
                            Нет созданных заказов
                        </span>
                    </div>
                {% endif %}
            </div>
            <div class="row">
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Все заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_discount_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_discount_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_years|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_years|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_costs_years|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Эвотор заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_offline_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_offline_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_offline_discount_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_offline_discount_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_offline_years|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_offline_years|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_offline_costs_years|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-shopping-cart"></i> Онлайн заказы |<span class="text-primary"> {{ start_date|date:"d.m.y" }} - {{ end_date|date:"d.m.y" }}</span></caption>
                        <tr>
                            <th class="col-md-10">Всего заказов</th>
                            <td class="col-md-2" >{{ orders_online_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего позиций</th>
                            <td class="col-md-2" >{{ lines_online_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Заказы со скидками</th>
                            <td class="col-md-2" >{{ orders_online_discount_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Позиции со скидками</th>
                            <td class="col-md-2" >{{ lines_online_discount_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общий доход</th>
                            <td class="col-md-2" >{{ revenue_online_years|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Общая скидка</th>
                            <td class="col-md-2" >{{ discount_online_years|currency }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Средняя стоимость заказа</th>
                            <td class="col-md-2" >{{ average_online_costs_years|currency }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-4">
                    <table class="table table-striped table-bordered table-hover table-text-right">
                        <caption><i class="fas fa-users"></i> Клиенты
                            <a href="{% url 'dashboard:customer-list' %}" class="btn btn-secondary float-right caption-fill-width">
                                <i class="fas fa-gears"></i> 
                                <span class="caption-button"> Управление</span>
                            </a>
                        </caption>
                        <tr>
                            <th class="col-md-10">Всего пользователей</th>
                            <td class="col-md-2" >{{ users_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего клиентов</th>
                            <td class="col-md-2" >{{ customers_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Новых пользователей</th>
                            <td class="col-md-2" >{{ users_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Новых клиентов</th>
                            <td class="col-md-2" >{{ customers_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Всего создано корзин</th>
                            <td class="col-md-2" >{{ baskets_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Клиенты с 2 и более заказами</th>
                            <td class="col-md-2" >{{ customers_2orders_years }}</td>
                        </tr>
                        <tr>
                            <th class="col-md-10">Клиенты с 5 и более заказами</th>
                            <td class="col-md-2" >{{ customers_5orders_years }}</td>
                        </tr>
                    </table>
                </div>
                {% if order_status_breakdown_years %}
                    <div class="col-md-4">
                        <table class="table table-striped table-bordered table-hover table-text-right">
                            <caption><i class="fas fa-shopping-cart"></i> Статусы заказов</caption>
                            {% for dict in order_status_breakdown_years %}
                                <tr>
                                    <th><a href="{% url 'dashboard:order-list' %}{% querystring 'status'=dict.status %}">{{ dict.status }}</a></th>
                                    <td>{{ dict.freq }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
                {% endif %}
            </div>
            <div class="row">
                {% if report_exist_years %}
                    <div class="col-md-4">
                        <table class="table table-striped table-bordered table-hover table-text-right">
                            <caption>
                                <i class="fas fa-shopping-cart"></i> Топ продаж</span>
                                <a href="{% url 'dashboard:catalogue-product-list' %}" class="btn btn-secondary float-right caption-fill-width">
                                    <i class="fas fa-gears"></i> 
                                    <span class="caption-button"> Управление</span>
                                </a>
                            </caption>
                            <thead>
                                <tr>
                                    <th class="col-md-9">Продукт</th>
                                    <th class="col-md-3 text-right">Кол-во</th>
                                    <th class="col-md-3 text-right">Сумма</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for prd in top_products_years %}
                                    <tr>
                                        <th class="col-md-9">
                                            <a href="{% url 'dashboard:catalogue-product' pk=prd.product %}">
                                                {{ prd.name }}
                                            </a>
                                        </th>
                                        <td class="col-md-3" >{{ prd.total_quantity }}</td>
                                        <td class="col-md-3" >{{ prd.total_sum|currency }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="col-md-8">
                        <div class="content-block rounded tab-content d-flex flex-column align-items-center">
                            <div class="half-wrapper">
                                <div class="nav tabs-button d-flex fill" role="tablist">
                                    <div class="tabs-button__active-block" style="width: calc(100% / 2); left: 0px;"><div class="fill-width fill-height"></div></div>
                                    <button role="button" class="tabs-button__button active" href="#top_product_price_year" data-toggle="tab">
                                        По стоимости
                                    </button>
                                    <button role="button" class="tabs-button__button" href="#top_product_count_year" data-toggle="tab">
                                        По количеству
                                    </button>
                                </div>
                            </div>
                            <div class="tab-pane fade show active chart-container" id="top_product_price_year" role="tabpanel">
                                <div class="d-flex justify-content-center mt-4">
                                    <div class="legend-chart d-flex flex-column" data-id="legend-price-chart"></div>
                                    <canvas class="canvas-graph canvas-graph--doughnut" data-id="price-chart"></canvas>
                                </div>
                            </div>
                            <div class="tab-pane fade chart-container" id="top_product_count_year" role="tabpanel">
                                <div class="d-flex justify-content-center mt-4">
                                    <div class="legend-chart d-flex flex-column" data-id="legend-count-chart"></div>
                                    <canvas class="canvas-graph canvas-graph--doughnut" data-id="count-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock dashboard_content %}

{% block templatescripts %}
    {{ block.super }}
    var products_names = {{ top_products_names|safe }}
    var products_sums = {{ top_products_sums|safe }}
    var products_quantities = {{ top_products_quantities|safe }}
    var orders_datas = {{ report_datas|safe }}
{% endblock %}

{% block extrascripts %}
    {% compress js %}
        <script src="{% static "js/dashboard/orders/statistic-orders.js" %}" async></script>
    {% endcompress %}
{% endblock %}