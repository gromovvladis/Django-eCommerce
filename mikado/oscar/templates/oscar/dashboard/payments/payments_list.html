{% extends 'oscar/dashboard/layout.html' %}
{% load static %}
{% load render_table from django_tables2 %}

{% block body_class %}{{ block.super }} payment-list{% endblock %}

{% block title %}{{ title }} | {{ block.super }}{% endblock %}

{% block breadcrumbs %}
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="{% url 'dashboard:index' %}">Панель управления</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">{{ title }}</li>
        </ol>
    </nav>
{% endblock %}

{% block header %}
    <div class="page-header d-flex justify-content-between">
        <h1>{{ title }}</h1>
        <p>Отображает последние 100 транзакций</p>
    </div>
{% endblock header %}

{% block dashboard_content %}
    <div class="table-header">
        <h3><i class="fas fa-filter"></i> Фильтр</h3>
    </div>
    <div class="card card-body bg-light">
        <form method="GET" action="" class="form-inline">
            
            <span class="error-block"></span>

            <div class="form-group mr-2 ">
                <label for="status">Статус:</label>
                <div class="form-inline">
                    <div class="input-group">
                        <select name="status" id="status" class="form-control">
                            <option value="">Все</option>
                            {% for option in status_options %}
                                <option value="{{ option.0 }}" {% if request.GET.status == option.0 %}selected{% endif %}>{{ option.1 }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group mr-2 ">
                
                <label for="date_gte">Дата с:</label>
                <div class="form-inline">
                    <div class="input-group date" id="wrapper_for_date_gte" data-oscarwidget="date" data-dateformat="DD.MM.YYYY" data-target-input="nearest">
                        <input type="text" name="date_gte" class="form-control" id="date_gte" data-inputmask="'alias': 'datetime', 'inputFormat': 'dd.mm.yyyy'" inputmode="numeric">
                        <div class="input-group-append" data-toggle="datetimepicker" data-target="#wrapper_for_date_gte">
                            <div class="input-group-text">
                                <i class="far fa-calendar-alt"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group mr-2 ">
                
                <label for="date_lte">Дата до:</label>
                <div class="form-inline">
                    <div class="input-group date" id="wrapper_for_date_lte" data-oscarwidget="date" data-dateformat="DD.MM.YYYY" data-target-input="nearest">
                        <input type="text" name="date_lte" class="form-control" id="date_lte" data-inputmask="'alias': 'datetime', 'inputFormat': 'dd.mm.yyyy'" inputmode="numeric">

                        <div class="input-group-append" data-toggle="datetimepicker" data-target="#wrapper_for_date_lte">
                            <div class="input-group-text">
                                <i class="far fa-calendar-alt"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <button class="btn btn-primary mr-2" type="submit">Найти</button>
            <a href="{% url 'dashboard:payments-list' %}" class="btn btn-secondary" type="submit">Очистить</a>
            
        </form>
    </div>

    {% render_table table %}

    {% if not transactions %}
        <p>транзакции не найдены</p>
    {% endif %}

{% endblock dashboard_content %}
